% \documentclass[journal, onecolumn, draftclsnofoot]{IEEEtranTIE}
\documentclass[journal]{IEEEtranTIE}
\usepackage{graphicx}
\usepackage{cite}
\usepackage{picinpar}
\usepackage{amsmath}
\usepackage{url}
\usepackage{flushend}
\usepackage[latin1]{inputenc}
\usepackage{colortbl}
\usepackage{soul}
\usepackage{multirow}
\usepackage{pifont}
\usepackage{color}
\usepackage{alltt}
\usepackage[hidelinks]{hyperref}
\usepackage{enumerate}
\usepackage{siunitx}
\usepackage{breakurl}
\usepackage{epstopdf}
\usepackage{pbox}

% Adds SVG Support out of SVG file
\usepackage{svg}
% \svgsetup{inkscape=force}   % Rerenders the inkscape images with new variants
% \svgsetup{inkscape=page}    % TODO

% Double line spacing
% \usepackage{setspace}
% \doublespace
%\linespread{2pc}

% Fancy table related trick
\usepackage{tikz}
\usepackage{makecell}
\def\chk{\tikz\fill[scale=0.4](0,.35) -- (.25,0) -- (1,.7) -- (.25,.15) -- cycle;}

% Python code
\usepackage{listings}

% Algorithmic
\usepackage{algorithm, algorithmic}

% Subfigures
\usepackage{caption}
\usepackage{subcaption}

%Code listing style
\lstdefinestyle{mystyle}{
  backgroundcolor=\color{backcolour},   commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  basicstyle=\ttfamily\footnotesize,
  breakatwhitespace=false,         
  breaklines=true,                 
  captionpos=b,                    
  keepspaces=true,                 
  numbers=left,                    
  numbersep=5pt,                  
  showspaces=false,                
  showstringspaces=false,
  showtabs=false,                  
  tabsize=2
}

%style code listing set
\lstset{style=mystyle}

% Produce landscape pages in a (mainly) portrait document.
\usepackage{pdflscape}

% Adding if execution to define between thesis and article
\usepackage{ifthen}
\newboolean{thesis}
\setboolean{thesis}{false}

% Intext plus-minus
\usepackage{textcomp}

\begin{document}
\title{Practical evaluation of Lithium-Ion battery State of Charge estimation using Time-Series Machine Learning for Electric Vehicles.}
\author{
	\vskip 1em
	
	Marat Sadykov, % \emph{Student Membership},
	Sam Haines,% \emph{Student Membership},
    \\ Dr Mark Broadmeadow, %\emph{Techinical Supervisor}
    \\ A/Prof Geoff Walker, %\emph{Associate Research Supervisor} and
	\\ A/Prof David Holmes, %\emph{Principal Research Supervisor},

	\thanks{
	
		Manuscript received Month xx, 2xxx; revised Month xx, XXXX; accepted Month x, XXXX.
		This work was supported in part by the Government of Australia under Automotive Engineering Graduate Program (AEGP) Grant.
		
		Marat Sadykov, Sam Haines and A/Prof David Holmes are with the School of Mech., Medical \& Process Engineering,  Queensland University of Technology (QUT), Brisbane, QLD, 4000, Australia (e-mail: marat.sadykov@hdr.qut.edu.au, sam.haines@hdr.qut.edu.au, d.holmes@qut.edu.au). 
		
		Dr Mark Broadmeadow and A/Prof Geoff Walker are with the School of Electrical Engineering \& Robotics,  Queensland University of Technology (QUT), Brisbane, QLD, 4000, Australia (e-mail: mark.broadmeadow@qut.edu.au, geoffrey.walker@qut.edu.au)
	}
}
\maketitle

\begin{abstract}
    \textbf{
    \input{I_Introduction/Abstract}
    % Abstract - to be updated
    }
\end{abstract}

%
% IF
\ifthenelse {\boolean{thesis}}
%
% THEN
{
\begin{IEEEkeywords}
    Adaptive Moment Estimation (Adam),
    Adaptive Moment Estimation based on the infinity norm (Adamax),
    Attention Layer,
    Chip-on-Board (CoB),
    Electric Vehicle (EV),
    Gradient Recurrent Unit (GRU),
    Lithium-Ion battery (Li-Ion),
    Long Short-Term Memory (LSTM),
    Nesterov Adaptive Moment Estimation (Nadam),
    % Raspberry Pi 4 (R-Pi4),
    Recurrent Neural Networks (RNN),
    Robust Online Adaptive Moment Estimation (RoAdam),
    State of Charge (SOC) estimation,
    Stochastic Gradient Descent with Momentum (SGDw/M),
    % Tensor Processing Unit (TPU),
    TensorFlow (TF),
    Time-Series Machine Learning
\end{IEEEkeywords}
}
%
% ELSE
{
\begin{IEEEkeywords}
    Driving schedulers,
    Optimisers,
    Recurrent Neural Networks (RNNs),
    State of Charge (SOC) estimation,
    Time-Series Machine Learning
\end{IEEEkeywords}
}

\markboth{IEEE TRANSACTIONS ON INDUSTRIAL ELECTRONICS}%
{}

%New colors defined below
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{limegreen}{rgb}{0.2, 0.8, 0.2}
\definecolor{forestgreen}{rgb}{0.13, 0.55, 0.13}
\definecolor{greenhtml}{rgb}{0.0, 0.5, 0.0}

%%% Introduction
\section{Introduction} \label{sec:Introduction}
\input{./I_Introduction/Intro}
% \section{ThesisIntro} \label{sec:thesisIntroduction}
% \input{./I_Introduction/ThesisIntro}
%%% Implementation
\section{Prelimery algorithmic evaluation} \label{sec:Body}
\input{./II_Body/RNN2}
    \input{./II_Body/GRU/gru}
    \input{./II_Body/LSTM/lstm}
    \subsection{Optimisers} \label{subsec:optimisers}
    \input{./II_Body/Optimisers/optimisers}
        \input{./II_Body/Optimisers/SGDwM}
        \input{./II_Body/Optimisers/adam}
        \input{./II_Body/Optimisers/ensemble}
    \input{./II_Body/Methodology/d_gen}
\begin{landscape}
    \begin{figure}[ht]
        \centering
        \includegraphics[width=\linewidth]{II_Body/images/windowing3f-A3.jpg}
        \caption{Data Windowing scheme at 1Hz sampling rate. For visualisation purposes, the $s$-step has been used as 250 seconds, which is different from the actual implementation. The initial index $i$ was kept as a value close to the beginning of the data, around zero.}
        \label{fig:Windowing3f}
    \end{figure}
\end{landscape}
%%% Methodology
\section{Evaluation methodology} \label{sec:Meth}
\input{./II_Body/Methodology/Methodology}
    \input{./II_Body/Methodology/b_data}
    \input{./II_Body/Methodology/t_model}
    \input{./II_Body/Methodology/l_rate}
    \input{./II_Body/Methodology/avg}
    % \input{./II_Body/Methodology/hardware}    %! Hardware goes to the thesis
%%% Conclusion
\section{Performance and Results}\label{sec:results}
%%% \input{./III_Conclussion/fig_history}
%%% \input{./III_Conclussion/figures} %! Separate figures and comments all by 1 for writing help.
%%% \input{./III_Conclussion/tab_accuracies}  
\input{./III_Conclussion/results}
% \IEEEtranTIE@iffilenewer
\input{./III_Conclussion/figures_new} 
\begin{landscape}
\input{./III_Conclussion/tab_accuracies_new}
\end{landscape}
%%     \subsection{Hardware performance overview}
    %% \input{./III_Conclussion/performance}
\section{Conclusion} \label{sec:conclussion}
\input{./III_Conclussion/articleConclussion}
\input{./III_Conclussion/acknowledgements}

\bibliographystyle{IEEEtranTIE}
\bibliography{
    ../Z-References/References,
    I_Introduction/BibIntro,
    II_Body/BibRNN,
    II_Body/LSTM/BibLSTM,
    II_Body/GRU/BibGRU,
    II_Body/Optimisers/BibOpt.bib
}
%
% IF
\ifthenelse {\boolean{thesis}}
%
% THEN
{
\clearpage
\appendices
\section{Appendix A: Robust Adam implementation}  \label{app:RoAdam}
\input{../X-Appendix/AppendixE}
\clearpage
\section{Appendix B: Getting Number of Flops from TF2.4}  \label{app:flops}
\input{../X-Appendix/AppendixF}
}
{}
\end{document}